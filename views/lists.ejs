<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="lists.css">
  <title>AirGo</title>
  <link rel="icon" href="images/airplane.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Merienda:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@100;200;300;400;500&family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@100;200;300;400;500&family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/bootstrap-social.css" />
  <link rel="stylesheet" href="css/styles.css" />
  <style>
    body {
      background-image: url('images/bg1.jpg');
      background-size: cover;
      background-position: center center;
      min-height: 100vh;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    .navbar {
      background-color: rgba(255, 255, 255, 0.7);
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      padding: 10px 20px;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1;
      transition: background-color 0.5s ease;
      /* transition effect */
    }

    .table-glass {
      background-color: rgba(255, 255, 255, 0.5);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .table-glass thead {
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 10px;
    }

    .table-glass th {
      border: none;
    }

    .table-glass tbody tr:nth-of-type(odd) {
      background-color: rgba(255, 255, 255, 0.5);
    }

    .table-glass tbody tr:nth-of-type(even) {
      background-color: rgba(255, 255, 255, 0.7);
    }

    .table-glass td {
      border: none;
    }

    .table-glass td button {
      background-color: rgba(31, 38, 135, 0.8);
      color: #fff;
      border: none;
      border-radius: 5px;
    }

    .table-glass td button:hover {
      background-color: rgb(148, 155, 255);
      transition: 0.2s;
    }

    .table-container {
      margin-top: 50px;
    }

    .navbar.scrolled {
      background-color: #333;
      /* new background color when scrolled */
    }
  </style>
</head>


<body>
  <script>
    function myfunction() {
      // window.location.replace('/');
      return;
    }
    window.onscroll = function() {
      var navbar = document.querySelector(".navbar");
      if (window.pageYOffset > 0) {
        /* replace 0 with the height of your navbar */
        navbar.classList.add("scrolled");
      } else {
        navbar.classList.remove("scrolled");
      }
    };
  </script>
  <nav class="navbar navbar-expand-lg navbar-light bg-transparent d-flex justify-content-between" style="background-color: rgba(255, 255, 255, 0.5); box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); padding: 10px 20px;">
    <a class="navbar-brand" style="color:white">
      Air Go <i class="fa fa-plane" aria-hidden="true"></i></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ml-auto navbar-right">
        <li class="nav-item">
          <a class="nav-link" href="/login" style="color: #fff; text-shadow: 0 0 10px rgba(0, 0, 0, 0.5); margin-left: 20px;">Login</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/register" style="color: #fff;  text-shadow: 0 0 10px rgba(0, 0, 0, 0.5); margin-left: 20px;">Register</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/logout" style="color: #fff;  text-shadow: 0 0 10px rgba(0, 0, 0, 0.5); margin-left: 20px;">Logout</a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="container mt-4 table-container">
    <div style="margin-top: 50px">
      <!-- <h2> Flights</h2> -->
    </div>

    <% const flightsPerPage = 30 %>

    <% const currentPage = (ctPage) %>
    <!-- <% console.log(currentPage) %> -->

    <% const totalFlights = flightDetailsComb.length %>

    <% const totalPages = Math.ceil(totalFlights / flightsPerPage); %>
    <!-- <% console.log(totalPages) %> -->

    <% const startIndex = (currentPage - 1) * flightsPerPage; %>
    <% const endIndex = startIndex + flightsPerPage; %>
    <!-- <% console.log(startIndex) %> -->
    <!-- <% console.log(endIndex) %> -->

    <% const flightDataNew = flightDetailsComb.slice(startIndex, endIndex);%>

    <% if (flightDataNew.length > 0) { %>

    <table class="table table-striped table-glass" style="margin-top: 10px;">
      <thead>
        <tr>
          <th>Flights</th>
          <th>Arrival Airport</th>
          <th>Departure Airport</th>
          <th>Arrival Time</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% for(var j=0; j < flightDataNew.length; j++) { %>
        <tr>
          <td>
            <%- (flightDataNew[j][1]) %> <br />
            <small><%- (flightDataNew[j][5]) %> - <%- (flightDataNew[j][4])%></small>
          </td>
          <td>
            <%- (flightDataNew[j][3]) %> <br />
            <small><%- (flightDataNew[j][2]) %></small>
          </td>
          <td>
            <%- (flightDataNew[j][5]) %> <br />
            <small><%- (flightDataNew[j][4]) %></small>
          </td>
          <td><%- (flightDataNew[j][6]) %></td>
          <td>
            <form action="/book" method="post">
              <input name="bookingId" value="<%- (flightDataNew[j][0]) %>" type="hidden">
              <input name="companySrtName" value="<%- (flightDataNew[j][1]) %>" type="hidden">
              <input name="arrivalCode" value="<%- (flightDataNew[j][2]) %>" type="hidden">
              <input name="arrivalLocation" value="<%- (flightDataNew[j][3]) %>" type="hidden">
              <input name="departureCode" value="<%- (flightDataNew[j][4]) %>" type="hidden">
              <input name="departLocation" value="<%- (flightDataNew[j][5]) %>" type="hidden">
              <input name="arrivalTime" value="<%- (flightDataNew[j][6]) %>" type="hidden">
              <input name="departureTime" value="<%- (flightDataNew[j][9]) %>" type="hidden">
              <button type="submit" class="btn btn-sm">Book Now</button>
            </form>
  </div>
  </td>
  </tr>
  <% } %>
  </tbody>
  </table>
  <!-- 
  <ul class="pagination">
    <% if (currentPage > 1) { %>
      
    <li class="page-item"><a class="page-link" href="?page=<%= currentPage - 1 %>">Previous</a></li>
    <% } %>

    <% for (var i = 1; i <= totalPages; i++) { %>
    <% if (i === currentPage) { %>
    <li class="page-item active"><a class="page-link" href="?page=<%= i %>"><%= i %></a></li>
    <% } else { %>
    <li class="page-item"><a class="page-link" href="?page=<%= i %>"><%= i %></a></li>
    <% } %>
    <% } %>

    <% if (currentPage < totalPages) { %>
    <li class="page-item"><a class="page-link" href="?page=<%= currentPage + 1 %>">Next</a></li>
    <% } %>
  </ul> -->

  <% } else { %>
  <p>No Flights to display.</p>
  <% } %>

  <!-- <h2>
      <% for(var j=0; j < flightDetailsComb.length; j++) { %> <%-
      (flightDetailsComb[j][0])%> <%}%>
    </h2> -->
</body>

</html>